# 工作日志格式规范指南

## 概述

本文档规范了VNext任务管理系统如何从Obsidian工作日志中提取任务。遵循此规范可以确保任务被正确识别、统计和管理。

## 核心原则

**只在需要完成的任务上使用checkbox（`- [ ]` 或 `- [x]`）**

- ✅ **使用checkbox**: 具体的、可操作的、需要追踪完成状态的任务
- ❌ **不使用checkbox**: 笔记、想法、日志记录、会议纪要、参考信息

## 文件结构

### 每日工作日志

**路径格式**: `02_Execution/Journal/YYYY/YYYY-MM-DD-工作日志.md`

**示例**: `02_Execution/Journal/2025/2025-10-30-工作日志.md`

### 每月复盘规划

**路径格式**: `01_Periodic/Monthly/YYYY-MM~YYYY-MM_复盘+规划.md`

**示例**: `01_Periodic/Monthly/2025-09~2025-10_复盘+规划.md`

## Checkbox 语法

### 基本格式

```markdown
- [ ] 未完成的任务
- [x] 已完成的任务
- [X] 已完成的任务（大写X也支持）
```

### 高优先级任务

使用 `⏫` emoji 标记高优先级：

```markdown
- [ ] ⏫ 重要且紧急的任务
- [x] ⏫ 已完成的高优先级任务
```

### 带截止日期的任务

使用 `📅 YYYY-MM-DD` 格式：

```markdown
- [ ] 完成项目报告 📅 2025-10-31
- [ ] 客户会议准备 📅 2025-11-01
```

### 带标签的任务

使用 `#标签名` 格式：

```markdown
- [ ] 修复登录bug #开发 #紧急
- [x] 代码审查 #review #frontend
```

### 时间块任务（推荐格式）

结合时间段和任务描述：

```markdown
- [x] 晨跑（07:30-08:45，30-40分钟）
- [ ] 咖啡馆深度工作：完成工作坊核心内容（09:00-12:00）
- [ ] 午休恢复（12:00-14:00）
- [ ] 昕完ML课程并做笔记（14:00-17:00）
```

## 正确示例

### ✅ 好的做法

```markdown
# 2025-10-30 工作日志

## 今日任务

- [x] 晨跑（07:30-08:45，30-40分钟）
- [x] 咖啡馆深度工作：完成工作坊核心内容（09:00-12:00）
- [ ] 午休恢复（12:00-14:00）
- [ ] 昕完ML课程并做笔记（14:00-17:00）
- [ ] ⏫ 准备明日演讲材料 📅 2025-10-31

## 项目进展

- [ ] 工作坊目标与受众定位
- [ ] 时间轴与议程设计
- [ ] 关键内容提纲
- [ ] 互动环节设计

## 会议记录

今天与客户讨论了新功能需求，主要包括：
- 用户认证系统升级
- 数据导出功能
- 移动端适配

**注意：这些是记录内容，不是任务，所以不使用checkbox**

## 学习笔记

今天学习了React Hooks的高级用法：
1. useCallback 优化性能
2. useMemo 缓存计算结果
3. useRef 访问DOM

**这些是笔记，不需要checkbox**

## 灵感与想法

💡 可以考虑使用AI自动生成任务摘要
💡 添加番茄钟计时器功能

**灵感记录不是任务，不使用checkbox**
```

### ❌ 错误做法（内容过度使用checkbox）

```markdown
# 2025-10-30 工作日志

- [x] 今天天气很好
- [x] 喝了一杯咖啡
- [x] 看到了有趣的文章
- [x] 和同事聊天讨论了项目
- [ ] 明天要早起
- [ ] 记得带伞
- [ ] 晚上看电影

**问题**：这些不是可操作的任务，导致：
1. 任务列表混乱，真正的任务被埋没
2. 完成率统计不准确
3. 优先级判断困难
```

## 每月规划格式

### ✅ 推荐格式

```markdown
# 2025-10月 复盘+规划

## 本月核心项目

### 项目A：VNext任务管理系统

- [x] 完成任务提取功能
- [x] 修复完成率统计bug
- [ ] 实现离线同步功能
- [ ] 添加数据导出功能

### 项目B：个人网站重构

- [ ] 设计新版首页
- [ ] 优化SEO设置
- [ ] 添加博客功能

## 个人成长目标

- [ ] 阅读《代码整洁之道》 #学习
- [ ] 完成机器学习课程第3-5章 #学习
- [ ] 参加技术分享会演讲 #成长

## 不需要checkbox的内容

### 复盘总结

本月完成的主要工作：
- 系统性重构了任务管理模块
- 性能优化提升30%
- 修复了15个critical bugs

### 经验教训

1. 缓存策略需要更谨慎的设计
2. 组件解耦能显著提升可维护性
3. 自动化测试节省了大量调试时间

**这些是总结性内容，不需要checkbox**
```

## 任务识别规则

VNext系统会提取以下任务：

### 1. 今日任务
- 来自**今天**日志的所有checkbox任务
- 截止日期为**今天**的任务（无论来自哪一天）

### 2. 逾期任务
- 截止日期**早于今天**且**未完成**的任务

### 3. 本月任务
- 来自本月所有日志的checkbox任务
- 本月复盘文件中的项目任务

## 性能优化建议

### 控制任务数量

- 每日任务建议：**5-15个**核心任务
- 每月项目任务：**15-30个**关键里程碑

### 使用分组

```markdown
## 上午时段
- [ ] 任务1
- [ ] 任务2

## 下午时段
- [ ] 任务3
- [ ] 任务4

## 项目A
- [ ] 子任务1
- [ ] 子任务2
```

### 定期归档

- 每周末归档已完成任务到周总结
- 每月末归档本月成果到月度复盘
- 已完成的历史任务不要保留checkbox（改为列表或段落）

## 常见问题

### Q1: 已完成的任务会消失吗？
**A**: 不会！修复后的系统会保留已完成任务，显示为划掉样式，方便回顾成果。

### Q2: 历史任务会影响性能吗？
**A**: 系统只加载**最近7天**的任务，减少不必要的文件请求。

### Q3: 如何标记紧急任务？
**A**: 使用 `⏫` emoji + 截止日期：
```markdown
- [ ] ⏫ 紧急修复生产环境bug 📅 2025-10-30 #紧急
```

### Q4: 子任务如何组织？
**A**: 使用缩进：
```markdown
- [ ] 完成项目报告
  - [ ] 收集数据
  - [ ] 分析结果
  - [ ] 撰写结论
```

### Q5: 可以在其他文件夹使用任务吗？
**A**: 当前系统只扫描以下位置：
- `02_Execution/Journal/` - 每日日志
- `01_Periodic/Monthly/` - 月度规划

其他位置的任务不会被自动提取。

## 最佳实践总结

1. **明确区分任务与笔记** - 只给可操作的事项加checkbox
2. **合理使用优先级** - `⏫` 标记真正重要的任务
3. **设置截止日期** - 使用 `📅 YYYY-MM-DD` 跟踪时间敏感任务
4. **添加上下文标签** - 使用 `#标签` 分类和过滤
5. **定期清理归档** - 避免任务列表过度膨胀
6. **保持一致性** - 使用统一的日期和文件命名格式

## 技术说明

### 正则表达式匹配

系统使用以下模式识别任务：

```javascript
/^[-*]\s\[([xX ])\]\s+(.+)$/
```

### 提取的元数据

- `isCompleted`: checkbox状态 (` ` = false, `x`/`X` = true)
- `priority`: 检测 `⏫` emoji
- `dueDate`: 解析 `📅 YYYY-MM-DD` 或 `@2025-10-31`
- `tags`: 提取所有 `#标签`
- `sourceDate`: 任务来源的日志日期

### 缓存机制

- 任务数据缓存**5分钟**
- 更新任务状态后**立即清除**所有缓存
- 确保统计数据准确性

---

**文档版本**: v1.0
**更新日期**: 2025-10-30
**维护者**: VNext Development Team

如有疑问或建议，请在项目仓库提issue。
